{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Vadim\\\\Desktop\\\\GoIT\\\\-=Tasks=-\\\\task-blog\\\\front-end\\\\blog\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Vadim\\\\Desktop\\\\GoIT\\\\-=Tasks=-\\\\task-blog\\\\front-end\\\\blog\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Vadim\\\\Desktop\\\\GoIT\\\\-=Tasks=-\\\\task-blog\\\\front-end\\\\blog\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Vadim\\\\Desktop\\\\GoIT\\\\-=Tasks=-\\\\task-blog\\\\front-end\\\\blog\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Vadim\\\\Desktop\\\\GoIT\\\\-=Tasks=-\\\\task-blog\\\\front-end\\\\blog\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Vadim\\\\Desktop\\\\GoIT\\\\-=Tasks=-\\\\task-blog\\\\front-end\\\\blog\\\\src\\\\Components\\\\PostDescription\\\\PostDescription.js\";\nimport React, { Component, Fragment } from 'react';\nimport { getDataCommentsAsync } from '../../redux/actions/getDataComments';\nimport { getDataPostsAsync } from '../../redux/actions/getDataPosts';\nimport { getNewComment as _getNewComment } from '../../redux/actions/getNewComment';\nimport { connect } from 'react-redux';\nimport InputComment from '../InputComment/InputComment';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport './PostDescription.css';\n\nvar PostDescription =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PostDescription, _Component);\n\n  function PostDescription() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PostDescription);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PostDescription)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      inputValueComm: '',\n      newComment: {}\n    };\n\n    _this.onePostComments = function () {\n      return _this.props.dataComments.map(function (el) {\n        return +el.postId === +_this.props.id ? React.createElement(\"li\", {\n          className: \"comments_item\",\n          key: el.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 27\n          },\n          __self: this\n        }, el.body) : null;\n      });\n    };\n\n    _this.onePost = function () {\n      return _this.props.dataPosts.map(function (el) {\n        return +el.id === +_this.props.id ? React.createElement(Fragment, {\n          key: el.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          className: \"onePost_title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32\n          },\n          __self: this\n        }, el.title), \" \", React.createElement(\"p\", {\n          className: \"onePost_body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32\n          },\n          __self: this\n        }, el.body)) : null;\n      });\n    };\n\n    _this.inputChange = function (event) {\n      var inputTextCom = event.target.value;\n\n      _this.setState({\n        inputValueComm: inputTextCom\n      });\n    };\n\n    _this.addComment = function (event) {\n      var newComment = {\n        postId: _this.props.id,\n        body: _this.state.inputValueComm\n      };\n\n      _this.setState({\n        newComment: newComment,\n        inputValueComm: ''\n      }, function () {\n        return newComment.body === \"\" ? null : _this.postNewComment(newComment);\n      });\n\n      console.log(newComment);\n    };\n\n    _this.postNewComment = function (obj) {\n      var config = {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      };\n      axios.post(\"http://localhost:3001/comments\", {\n        postId: obj.postId,\n        body: obj.body\n      }, config).then(function (res) {\n        return console.log(res);\n      }).then(function (res) {\n        return function (dispatch) {\n          return dispatch(_getNewComment(res.data));\n        };\n      }) // .then(() => this.props.getDataComments())\n      .catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(PostDescription, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getDataComments();\n      this.props.getDataPosts();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var showComments = this.onePostComments();\n      var showPost = this.onePost();\n      return React.createElement(\"div\", {\n        className: \"one_post_wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(InputComment, {\n        inputChange: this.inputChange,\n        addComment: this.addComment,\n        inputValueComm: this.state.inputValueComm,\n        postNewComment: this.postNewComment,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), showPost, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Comments:\"), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, showComments));\n    }\n  }]);\n\n  return PostDescription;\n}(Component);\n\nvar MSTP = function MSTP(state) {\n  return {\n    dataPosts: state.dataPosts,\n    dataComments: state.dataComments\n  };\n};\n\nvar MDTP = function MDTP(dispatch) {\n  return {\n    getDataComments: function getDataComments() {\n      dispatch(getDataCommentsAsync());\n    },\n    getDataPosts: function getDataPosts() {\n      dispatch(getDataPostsAsync());\n    },\n    getNewComment: function getNewComment() {\n      dispatch(_getNewComment());\n    }\n  };\n};\n\nPostDescription.propTypes = {\n  id: PropTypes.string\n};\nexport default connect(MSTP, MDTP)(PostDescription);","map":{"version":3,"sources":["C:\\Users\\Vadim\\Desktop\\GoIT\\-=Tasks=-\\task-blog\\front-end\\blog\\src\\Components\\PostDescription\\PostDescription.js"],"names":["React","Component","Fragment","getDataCommentsAsync","getDataPostsAsync","getNewComment","connect","InputComment","axios","PropTypes","PostDescription","state","inputValueComm","newComment","onePostComments","props","dataComments","map","el","postId","id","body","onePost","dataPosts","title","inputChange","event","inputTextCom","target","value","setState","addComment","postNewComment","console","log","obj","config","headers","post","then","res","dispatch","data","catch","err","getDataComments","getDataPosts","showComments","showPost","MSTP","MDTP","propTypes","string"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from 'react';\r\nimport {getDataCommentsAsync} from '../../redux/actions/getDataComments';\r\nimport {getDataPostsAsync} from '../../redux/actions/getDataPosts';\r\nimport {getNewComment} from '../../redux/actions/getNewComment';\r\n\r\nimport {connect} from 'react-redux';\r\nimport InputComment from '../InputComment/InputComment';\r\nimport axios from 'axios';\r\nimport PropTypes from 'prop-types';\r\nimport './PostDescription.css';\r\n\r\n\r\n\r\nclass PostDescription extends Component {\r\n\r\n    state = {\r\n        inputValueComm: '',\r\n        newComment: {},\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.getDataComments();\r\n        this.props.getDataPosts();\r\n    }\r\n\r\n    onePostComments = () => {\r\n      return this.props.dataComments.map(el => +el.postId === +this.props.id ? <li className=\"comments_item\" key={el.id}>{el.body}</li> : null)\r\n    }\r\n\r\n    onePost = () => {\r\n        return this.props.dataPosts.map(el => +el.id === +this.props.id ? \r\n            (<Fragment key={el.id}><h3 className=\"onePost_title\">{el.title}</h3> <p className=\"onePost_body\">{el.body}</p></Fragment>)\r\n                : null)\r\n    }\r\n\r\ninputChange = (event) => {\r\n    let inputTextCom = event.target.value;\r\n    this.setState ({\r\n        inputValueComm: inputTextCom\r\n    })\r\n  };\r\n    \r\n      addComment = (event) => {\r\n        let newComment = {\r\n            postId: this.props.id,\r\n            body: this.state.inputValueComm,\r\n        };\r\n        this.setState (\r\n            {\r\n                newComment: newComment,\r\n                inputValueComm: '',\r\n            }, () => newComment.body === \"\" ? null : this.postNewComment(newComment)\r\n        )\r\n        console.log(newComment);\r\n      };\r\n\r\n      postNewComment = (obj , ) => {\r\n        let config = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n        }\r\n        axios.post(\"http://localhost:3001/comments\",{postId: obj.postId, body: obj.body},config)\r\n        .then(res => console.log(res))\r\n        .then(res => dispatch => dispatch(getNewComment(res.data)))\r\n        // .then(() => this.props.getDataComments())\r\n        .catch(err => console.log(err))\r\n      }\r\n       \r\n\r\n    render () {\r\n        const showComments = this.onePostComments();\r\n        const showPost = this.onePost();\r\n\r\n    return (\r\n        <div className=\"one_post_wrapper\">\r\n            <InputComment inputChange={this.inputChange} addComment={this.addComment} inputValueComm={this.state.inputValueComm} postNewComment={this.postNewComment} />\r\n            {showPost}\r\n            <span>Comments:</span>\r\n            <ul>\r\n                {showComments}\r\n            </ul>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst MSTP = state => ({\r\n    dataPosts: state.dataPosts,\r\n    dataComments: state.dataComments,\r\n})\r\n\r\nconst MDTP = dispatch => ({\r\n    getDataComments: () => {\r\n        dispatch(getDataCommentsAsync())\r\n    },\r\n    getDataPosts: () => {\r\n        dispatch(getDataPostsAsync())\r\n    },\r\n    getNewComment: () => {\r\n        dispatch(getNewComment())\r\n    },\r\n})\r\n\r\nPostDescription.propTypes = {\r\n    id: PropTypes.string,\r\n}\r\n\r\nexport default connect(MSTP,MDTP)(PostDescription);"]},"metadata":{},"sourceType":"module"}